/*!
 * Ventus 0.3
 * Copyright © 2015 Ramón Lamana
 * http://www.rlamana.com
 */
!function(t,n){"function"==typeof define&&define.amd?define(["$"],n):t.Ventus=n(t.$)}(this,function(t){var n,e,i;return function(t){function r(t,n){var e,i,r,s,o,a,u,c,l,h,f=n&&n.split("/"),p=m.map,d=p&&p["*"]||{};if(t&&"."===t.charAt(0)&&n){for(f=f.slice(0,f.length-1),t=f.concat(t.split("/")),c=0;h=t[c];c++)if("."===h)t.splice(c,1),c-=1;else if(".."===h){if(1===c&&(".."===t[2]||".."===t[0]))return!0;c>0&&(t.splice(c-1,2),c-=2)}t=t.join("/")}if((f||d)&&p){for(e=t.split("/"),c=e.length;c>0;c-=1){if(i=e.slice(0,c).join("/"),f)for(l=f.length;l>0;l-=1)if(r=p[f.slice(0,l).join("/")],r&&(r=r[i])){s=r,o=c;break}if(s)break;!a&&d&&d[i]&&(a=d[i],u=c)}!s&&a&&(s=a,o=u),s&&(e.splice(0,o,s),t=e.join("/"))}return t}function s(n,e){return function(){return f.apply(t,g.call(arguments,0).concat([n,e]))}}function o(t){return function(n){return r(n,t)}}function a(t){return function(n){p[t]=n}}function u(n){if(d.hasOwnProperty(n)){var e=d[n];delete d[n],v[n]=!0,h.apply(t,e)}if(!p.hasOwnProperty(n))throw new Error("No "+n);return p[n]}function c(t,n){var e,i,s=t.indexOf("!");return-1!==s?(e=r(t.slice(0,s),n),t=t.slice(s+1),i=u(e),t=i&&i.normalize?i.normalize(t,o(n)):r(t,n)):t=r(t,n),{f:e?e+"!"+t:t,n:t,p:i}}function l(t){return function(){return m&&m.config&&m.config[t]||{}}}var h,f,p={},d={},m={},v={},g=[].slice;h=function(n,e,i,r){var o,h,f,m,g,w,y=[];if(r=r||n,"function"==typeof i){for(e=!e.length&&i.length?["require","exports","module"]:e,w=0;w<e.length;w++)if(g=c(e[w],r),f=g.f,"require"===f)y[w]=s(n);else if("exports"===f)y[w]=p[n]={},o=!0;else if("module"===f)h=y[w]={id:n,uri:"",exports:p[n],config:l(n)};else if(p.hasOwnProperty(f)||d.hasOwnProperty(f))y[w]=u(f);else if(g.p)g.p.load(g.n,s(r,!0),a(f),{}),y[w]=p[f];else if(!v[f])throw new Error(n+" missing "+f);m=i.apply(p[n],y),n&&(h&&h.exports!==t&&h.exports!==p[n]?p[n]=h.exports:m===t&&o||(p[n]=m))}else n&&(p[n]=i)},n=e=f=function(n,e,i,r){return"string"==typeof n?u(c(n,e).f):(n.splice||(m=n,e.splice?(n=e,e=i,i=null):n=t),e=e||function(){},r?h(t,n,e,i):setTimeout(function(){h(t,n,e,i)},15),f)},f.config=function(t){return m=t,f},i=function(t,n,e){n.splice||(e=n,n=[]),d[t]=[t,n,e]},i.amd={jQuery:!0}}(),i("almond",[],function(){}),function(t,n){"function"==typeof i&&i.amd?i("handlebars",[],n):"object"==typeof exports?module.exports=n():t.Handlebars=t.Handlebars||n()}(this,function(){var t=function(){"use strict";function t(t){this.string=t}var n;return t.prototype.toString=function(){return""+this.string},n=t}(),n=function(t){"use strict";function n(t){return u[t]}function e(t){for(var n=1;n<arguments.length;n++)for(var e in arguments[n])Object.prototype.hasOwnProperty.call(arguments[n],e)&&(t[e]=arguments[n][e]);return t}function i(t){return t instanceof a?t.toString():null==t?"":t?(t=""+t,l.test(t)?t.replace(c,n):t):t+""}function r(t){return t||0===t?p(t)&&0===t.length?!0:!1:!0}function s(t,n){return(t?t+".":"")+n}var o={},a=t,u={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},c=/[&<>"'`]/g,l=/[&<>"'`]/;o.extend=e;var h=Object.prototype.toString;o.toString=h;var f=function(t){return"function"==typeof t};f(/x/)&&(f=function(t){return"function"==typeof t&&"[object Function]"===h.call(t)});var f;o.isFunction=f;var p=Array.isArray||function(t){return t&&"object"==typeof t?"[object Array]"===h.call(t):!1};return o.isArray=p,o.escapeExpression=i,o.isEmpty=r,o.appendContextPath=s,o}(t),e=function(){"use strict";function t(t,n){var i;n&&n.firstLine&&(i=n.firstLine,t+=" - "+i+":"+n.firstColumn);for(var r=Error.prototype.constructor.call(this,t),s=0;s<e.length;s++)this[e[s]]=r[e[s]];i&&(this.lineNumber=i,this.column=n.firstColumn)}var n,e=["description","fileName","lineNumber","message","name","number","stack"];return t.prototype=new Error,n=t}(),i=function(t,n){"use strict";function e(t,n){this.helpers=t||{},this.partials=n||{},i(this)}function i(t){t.registerHelper("helperMissing",function(){if(1===arguments.length)return void 0;throw new o("Missing helper: '"+arguments[arguments.length-1].name+"'")}),t.registerHelper("blockHelperMissing",function(n,e){var i=e.inverse,r=e.fn;if(n===!0)return r(this);if(n===!1||null==n)return i(this);if(l(n))return n.length>0?(e.ids&&(e.ids=[e.name]),t.helpers.each(n,e)):i(this);if(e.data&&e.ids){var o=v(e.data);o.contextPath=s.appendContextPath(e.data.contextPath,e.name),e={data:o}}return r(n,e)}),t.registerHelper("each",function(t,n){if(!n)throw new o("Must pass iterator to #each");var e,i,r=n.fn,a=n.inverse,u=0,c="";if(n.data&&n.ids&&(i=s.appendContextPath(n.data.contextPath,n.ids[0])+"."),h(t)&&(t=t.call(this)),n.data&&(e=v(n.data)),t&&"object"==typeof t)if(l(t))for(var f=t.length;f>u;u++)e&&(e.index=u,e.first=0===u,e.last=u===t.length-1,i&&(e.contextPath=i+u)),c+=r(t[u],{data:e});else for(var p in t)t.hasOwnProperty(p)&&(e&&(e.key=p,e.index=u,e.first=0===u,i&&(e.contextPath=i+p)),c+=r(t[p],{data:e}),u++);return 0===u&&(c=a(this)),c}),t.registerHelper("if",function(t,n){return h(t)&&(t=t.call(this)),!n.hash.includeZero&&!t||s.isEmpty(t)?n.inverse(this):n.fn(this)}),t.registerHelper("unless",function(n,e){return t.helpers["if"].call(this,n,{fn:e.inverse,inverse:e.fn,hash:e.hash})}),t.registerHelper("with",function(t,n){h(t)&&(t=t.call(this));var e=n.fn;if(s.isEmpty(t))return n.inverse(this);if(n.data&&n.ids){var i=v(n.data);i.contextPath=s.appendContextPath(n.data.contextPath,n.ids[0]),n={data:i}}return e(t,n)}),t.registerHelper("log",function(n,e){var i=e.data&&null!=e.data.level?parseInt(e.data.level,10):1;t.log(i,n)}),t.registerHelper("lookup",function(t,n){return t&&t[n]})}var r={},s=t,o=n,a="2.0.0";r.VERSION=a;var u=6;r.COMPILER_REVISION=u;var c={1:"<= 1.0.rc.2",2:"== 1.0.0-rc.3",3:"== 1.0.0-rc.4",4:"== 1.x.x",5:"== 2.0.0-alpha.x",6:">= 2.0.0-beta.1"};r.REVISION_CHANGES=c;var l=s.isArray,h=s.isFunction,f=s.toString,p="[object Object]";r.HandlebarsEnvironment=e,e.prototype={constructor:e,logger:d,log:m,registerHelper:function(t,n){if(f.call(t)===p){if(n)throw new o("Arg not supported with multiple helpers");s.extend(this.helpers,t)}else this.helpers[t]=n},unregisterHelper:function(t){delete this.helpers[t]},registerPartial:function(t,n){f.call(t)===p?s.extend(this.partials,t):this.partials[t]=n},unregisterPartial:function(t){delete this.partials[t]}};var d={methodMap:{0:"debug",1:"info",2:"warn",3:"error"},DEBUG:0,INFO:1,WARN:2,ERROR:3,level:3,log:function(t,n){if(d.level<=t){var e=d.methodMap[t];"undefined"!=typeof console&&console[e]&&console[e].call(console,n)}}};r.logger=d;var m=d.log;r.log=m;var v=function(t){var n=s.extend({},t);return n._parent=t,n};return r.createFrame=v,r}(n,e),r=function(t,n,e){"use strict";function i(t){var n=t&&t[0]||1,e=f;if(n!==e){if(e>n){var i=p[e],r=p[n];throw new h("Template was precompiled with an older version of Handlebars than the current runtime. Please update your precompiler to a newer version ("+i+") or downgrade your runtime to an older version ("+r+").")}throw new h("Template was precompiled with a newer version of Handlebars than the current runtime. Please update your runtime to a newer version ("+t[1]+").")}}function r(t,n){if(!n)throw new h("No environment passed to template");if(!t||!t.main)throw new h("Unknown template object: "+typeof t);n.VM.checkRevision(t.compiler);var e=function(e,i,r,s,o,a,u,c,f){o&&(s=l.extend({},s,o));var p=n.VM.invokePartial.call(this,e,r,s,a,u,c,f);if(null==p&&n.compile){var d={helpers:a,partials:u,data:c,depths:f};u[r]=n.compile(e,{data:void 0!==c,compat:t.compat},n),p=u[r](s,d)}if(null!=p){if(i){for(var m=p.split("\n"),v=0,g=m.length;g>v&&(m[v]||v+1!==g);v++)m[v]=i+m[v];p=m.join("\n")}return p}throw new h("The partial "+r+" could not be compiled when running in runtime-only mode")},i={lookup:function(t,n){for(var e=t.length,i=0;e>i;i++)if(t[i]&&null!=t[i][n])return t[i][n]},lambda:function(t,n){return"function"==typeof t?t.call(n):t},escapeExpression:l.escapeExpression,invokePartial:e,fn:function(n){return t[n]},programs:[],program:function(t,n,e){var i=this.programs[t],r=this.fn(t);return n||e?i=s(this,t,r,n,e):i||(i=this.programs[t]=s(this,t,r)),i},data:function(t,n){for(;t&&n--;)t=t._parent;return t},merge:function(t,n){var e=t||n;return t&&n&&t!==n&&(e=l.extend({},n,t)),e},noop:n.VM.noop,compilerInfo:t.compiler},r=function(n,e){e=e||{};var s=e.data;r._setup(e),!e.partial&&t.useData&&(s=u(n,s));var o;return t.useDepths&&(o=e.depths?[n].concat(e.depths):[n]),t.main.call(i,n,i.helpers,i.partials,s,o)};return r.isTop=!0,r._setup=function(e){e.partial?(i.helpers=e.helpers,i.partials=e.partials):(i.helpers=i.merge(e.helpers,n.helpers),t.usePartial&&(i.partials=i.merge(e.partials,n.partials)))},r._child=function(n,e,r){if(t.useDepths&&!r)throw new h("must pass parent depths");return s(i,n,t[n],e,r)},r}function s(t,n,e,i,r){var s=function(n,s){return s=s||{},e.call(t,n,t.helpers,t.partials,s.data||i,r&&[n].concat(r))};return s.program=n,s.depth=r?r.length:0,s}function o(t,n,e,i,r,s,o){var a={partial:!0,helpers:i,partials:r,data:s,depths:o};if(void 0===t)throw new h("The partial "+n+" could not be found");return t instanceof Function?t(e,a):void 0}function a(){return""}function u(t,n){return n&&"root"in n||(n=n?d(n):{},n.root=t),n}var c={},l=t,h=n,f=e.COMPILER_REVISION,p=e.REVISION_CHANGES,d=e.createFrame;return c.checkRevision=i,c.template=r,c.program=s,c.invokePartial=o,c.noop=a,c}(n,e,i),s=function(t,n,e,i,r){"use strict";var s,o=t,a=n,u=e,c=i,l=r,h=function(){var t=new o.HandlebarsEnvironment;return c.extend(t,o),t.SafeString=a,t.Exception=u,t.Utils=c,t.escapeExpression=c.escapeExpression,t.VM=l,t.template=function(n){return l.template(n,t)},t},f=h();return f.create=h,f["default"]=f,s=f}(i,t,e,n,r);return s}),i("ventus/core/emitter",[],function(){"use strict";function t(t,n,e){return function(i){return(i.funct===t&&i.scope===n)===e}}function n(n,e,i,r){return n[e]?n[e].some(t(i,r,!0)):!1}function e(){this._listeners={}}return e.prototype={listenersCount:function(t){var n=this._listeners[t];return n?n.length:0},on:function(t,e,i){var r=this._listeners;n(r,t,e,i)||(r[t]||(r[t]=[]),r[t].push({funct:e,scope:i}))},off:function(n,e,i){var r=this._listeners[n];r&&(this._listeners[n]=r.filter(t(e,i,!1)))},once:function(t,e,i){n(this._listeners,t,e,i)||this.on(t,function r(){this.off(t,r,this),e.apply(i,arguments)},this)},emit:function(t){var n=this._listeners[t];if(n){var e=Array.prototype.slice.call(arguments,1);n.forEach(function(t){t.funct.apply(t.scope,e)})}},connect:function(t,n){if(t)for(var e in t)t.hasOwnProperty(e)&&this.on(e,t[e],n)},disconnect:function(t,n){if(t)for(var e in t)t.hasOwnProperty(e)&&this.off(e,t[e],n)}},e}),i("ventus/core/promise",[],function(){"use strict";function t(t,n,e){setTimeout(function(){t.apply(n,e)})}function n(t,n,e){var i="Error on "+t+" promise execution at index ["+e+"]";Error.call(this,i),this.child=n,this.index=e,this.message=i}function e(){this._future=new s}function i(t){return t.hasSucceed()}function r(t,e,i,o,a){return i+=1,i>=t.length?o.done(a):a instanceof s?void a.then(function(){r(t,e,i,o,t[i].apply(e,arguments))},function(t){o.fail(new n(" serial ",t,i))}):r(t,e,i,o,t[i].call(e,a))}function s(){this._args=null,this._fn={success:[],failed:[],"finally":[]}}var o=Array.prototype.slice;return e.prototype={constructor:e,done:function(){var t=o.call(arguments);this.getFuture()._arrived("success",t)},fail:function(){var t=o.call(arguments);this.getFuture()._arrived("failed",t)},getFuture:function(){return this._future}},e.done=function(){var t=new e;return t.done.apply(t,arguments),t.getFuture()},e.failed=function(){var t=new e;return t.fail.apply(t,arguments),t.getFuture()},e.parallel=function(){return e.all(o.call(arguments))},e.all=function(t){if(!t||!t.length)return e.done();t=t.map(function(t){return t.getFuture?t.getFuture():t});var r=new e,s=[];return t.forEach(function(e,a){e.then(function(){s[a]=o.call(arguments),t.every(i)&&r.done.apply(r,s)},function(t){r.fail(new n("parallel",t,a))})}),r.getFuture()},e.serial=function(t,n){if(!t||0===t.length)return e.done();var i=new e;return setTimeout(function(){r(t,n,0,i,t[0].call(n))}),i.getFuture()},s.prototype={constructor:s,_add:function(n,e,i){return e?this._fn[n]===!0?t(e,i,this._args):this._fn[n]&&this._fn[n].push({callback:e,scope:i}):console.warn("No callback passed"),this},_arrived:function(t,n){function e(t){t.callback.apply(t.scope,n)}if(this.isCompleted())throw new Error("Future already arrived!");var i=this._fn[t].concat(this._fn["finally"]);this._fn={success:!1,failed:!1,"finally":!0},this._args=n,this._fn[t]=!0,i.forEach(e)},isCompleted:function(){return this._fn["finally"]===!0},hasFailed:function(){return this._fn.failed===!0},hasSucceed:function(){return this._fn.success===!0},onDone:function(t,n){return this._add("success",t,n)},onError:function(t,n){return this._add("failed",t,n)},onFinally:function(t,n){return this._add("finally",t,n)},then:function(t,n,e){t&&this.onDone(t),n&&this.onError(n),e&&this.onFinally(e)},transform:function(t){var n=new e;return this.then(function(){var e=t.apply(null,arguments);e&&"array"===e.constructor||(e=[e]),n.done.apply(n,e)},function(){n.fail.apply(n,arguments)}),n.getFuture()}},e.PromiseError=n,e.Future=s,e}),i("ventus/core/view",["$"],function(t){"use strict";for(var n=/^(?:(.*)\s)?(\w+)$/,e="transitionend webkitTransitionEnd oTransitionEnd MSTransitionEnd",i="animationend webkitAnimationEnd oAnimationEnd MSAnimationEnd",r=["transform","transition","animation","transform-origin"],s=r.length;s--;)!function(n){t.cssHooks[n]={get:function(){return null},set:function(t,e){t.style["-webkit-"+n]=e,t.style["-moz-"+n]=e,t.style["-ms-"+n]=e,t.style["-o-"+n]=e,t.style[n]=e}}}(r[s]);return t.fn.extend({listen:function(t,e){var i,r,s,o;for(var a in t)if(t.hasOwnProperty(a)){if(i=t[a],r=a.match(n),s=r[1],o=r[2],"mousedown"===o?o+=" touchstart":"mousemove"===o?o+=" touchmove":"mouseup"===o?o+=" touchend":"click"===o&&(o+=" touchend"),"string"==typeof i&&(i=e[i]),!i)throw new Error("Handler not found");s?this.on(o,s,i.bind(e)):this.on(o,i.bind(e))}return this},onTransitionEnd:function(t,n){this.one(e,function(){t.apply(n||this)})},onAnimationEnd:function(t,n){this.one(i,function(){t.apply(n||this)})}}),function(n){return"function"==typeof n?function(e){return t(n(e||{}))}:t(n)}}),i("ventus/tpl/window",["handlebars"],function(t){return t.template({compiler:[6,">= 2.0.0-beta.1"],main:function(t,n,e,i){var r,s="function",o=n.helperMissing,a=this.escapeExpression;return'<div class="wm-window '+a((r=null!=(r=n.classname||(null!=t?t.classname:t))?r:o,typeof r===s?r.call(t,{name:"classname",hash:{},data:i}):r))+'">\n	<div class="wm-window-box">\n		<header class="wm-window-title" unselectable="on">\n			<h1 unselectable="on">'+a((r=null!=(r=n.title||(null!=t?t.title:t))?r:o,typeof r===s?r.call(t,{name:"title",hash:{},data:i}):r))+'</h1>\n			<div class="wm-button-group">\n				<button class="wm-minimize">&nbsp;</button>\n				<button class="wm-maximize">&nbsp;</button>\n				<button class="wm-close">&nbsp;</button>\n			</div>\n		</header>\n\n		<section class="wm-content"></section>\n\n		<button class="wm-resize">&nbsp;</button>\n	</div>\n	<div class="wm-window-overlay"></div>\n</div>\n'},useData:!0})}),i("ventus/wm/window",["ventus/core/emitter","ventus/core/promise","ventus/core/view","ventus/tpl/window"],function(t,n,e,i){"use strict";function r(t){return!!window.TouchEvent&&t.originalEvent instanceof window.TouchEvent}function s(t){return r(t)?t.originalEvent.changedTouches[0]:t.originalEvent}var o=function(n){if(this.signals=new t,n=n||{title:"Untitle Window",width:400,height:200,x:0,y:0,content:"",movable:!0,resizable:!0,widget:!1,titlebar:!0,animations:!0,classname:"",stayinspace:!1},n.animations&&n.classname+" animated",this.el=e(i({title:n.title,classname:n.classname})),this.el.listen(this.events.window,this),n.opacity&&this.el.css("opacity",n.opacity),n.events)for(var r in n.events)n.events.hasOwnProperty(r)&&"function"==typeof n.events[r]&&this.signals.on(r,n.events[r],this);this.$content=this.el.find(".wm-content"),n.content&&this.$content.append(n.content),this.$titlebar=this.el.find("header"),this.width=n.width||400,this.height=n.height||200,this.x=n.x||0,this.y=n.y||0,this.z=1e4,this.enabled=!0,this.active=!1,this.maximized=!1,this.minimized=!1,this._closed=!0,this._destroyed=!1,this.widget=!1,this.movable="undefined"!=typeof n.movable?n.movable:!0,this.resizable="undefined"!=typeof n.resizable?n.resizable:!0,this.animations="undefined"!=typeof n.animations?n.animations:!0,this.titlebar=!0,this.stayinspace="undefined"!=typeof n.stayinspace?n.stayinspace:!1};return o.prototype={_restore:null,_moving:null,_resizing:null,slots:{move:function(t){var n=s(t);this.enabled&&this.movable&&(this._moving=this.toLocal({x:n.pageX,y:n.pageY}),this.el.addClass("move"),this._space[0].classList.add("no-events"),t.preventDefault())}},events:{window:{click:function(t){this.signals.emit("select",this,t)},mousedown:function(t){this.focus(),this.widget&&this.slots.move.call(this,t)},".wm-content click":function(t){this.enabled&&this.signals.emit("click",this,t)},".wm-window-title mousedown":function(t){this.maximized||this.slots.move.call(this,t)},".wm-window-title dblclick":function(){this.enabled&&this.resizable&&this.maximize()},".wm-window-title button.wm-close click":function(t){t.stopPropagation(),t.preventDefault(),this.enabled&&this.close()},".wm-window-title button.wm-maximize click":function(t){t.stopPropagation(),t.preventDefault(),this.enabled&&this.resizable&&this.maximize()},".wm-window-title button.wm-minimize click":function(t){t.stopPropagation(),t.preventDefault(),this.enabled&&this.minimize()},".wm-window-title button mousedown":function(t){this.focus(),t.stopPropagation(),t.preventDefault()},"button.wm-resize mousedown":function(t){var n=s(t);this.enabled&&this.resizable&&(this._resizing={width:this.width-n.pageX,height:this.height-n.pageY},this._space[0].classList.add("no-events"),this.el.addClass("resizing"),t.preventDefault())}},space:{mousemove:function(t){var n=s(t);if(r(t)||1===t.which||(this._moving&&this._stopMove(),this._resizing&&this._stopResize()),this._moving)if(this.stayinspace){(this.el[0].clientWidth>this.space[0].clientWidth||this.el[0].clientHeight>this.space[0].clientHeight)&&this.resize(Math.min(this.el[0].clientWidth,this.space[0].clientWidth),Math.min(this.el[0].clientHeight,this.space[0].clientHeight));var e=Math.max(0,n.pageX-this._moving.x),i=0,o=Math.max(0,n.pageY-this._moving.y),a=0;e+this.el[0].clientWidth>this.space[0].clientWidth&&(i=e+this.el[0].clientWidth-this.space[0].clientWidth),o+this.el[0].clientHeight>this.space[0].clientHeight&&(a=o+this.el[0].clientHeight-this.space[0].clientHeight),this.move(e-i,o-a)}else this.move(n.pageX-this._moving.x,n.pageY-this._moving.y);this._resizing&&this.resize(n.pageX+this._resizing.width,n.pageY+this._resizing.height)},mouseup:function(){this._moving&&this._stopMove(),this._resizing&&this._stopResize()}}},_stopMove:function(){this.el.removeClass("move"),this._space[0].classList.remove("no-events"),this._moving=null},_stopResize:function(){this._space[0].classList.remove("no-events"),this.el.removeClass("resizing"),this._restore=null,this._resizing=null},set space(t){return t&&!t.listen?void console.error("The given space element is not a valid View"):(this._space=t,t.append(this.el),void t.listen(this.events.space,this))},get space(){return this._space},get maximized(){return this._maximized},set maximized(t){t?(this._restoreMaximized=this.stamp(),this.el.addClass("maximized"),this.signals.emit("maximize",this,this._restoreMaximized)):(this.el.removeClass("maximized"),this.signals.emit("restore",this,this._restoreMaximized)),this._maximized=t},get minimized(){return this._minimized},set minimized(t){t?(this._restoreMinimized=this.stamp(),this.signals.emit("minimize",this,this._restoreMinimized)):this.signals.emit("restore",this,this._restoreMinimized),this._minimized=t},set active(t){t?(this.signals.emit("focus",this),this.el.addClass("active"),this.el.removeClass("inactive")):(this.signals.emit("blur",this),this.el.removeClass("active"),this.el.addClass("inactive")),this._active=t},get active(){return this._active},set enabled(t){t?this.el.removeClass("disabled"):this.el.addClass("disabled"),this._enabled=t},get enabled(){return this._enabled},set movable(t){this._movable=!!t},get movable(){return this._movable},set resizable(t){t?this.el.removeClass("noresizable"):this.el.addClass("noresizable"),this._resizable=!!t},get resizable(){return this._resizable},set closed(t){},get closed(){return this._closed},set destroyed(t){},get destroyed(){return this._destroyed},set widget(t){this._widget=t},get widget(){return this._widget},set titlebar(t){t?this.$titlebar.removeClass("hide"):this.$titlebar.addClass("hide"),this._titlebar=t},get titlebar(){return this._titlebar},set animations(t){t?this.el.addClass("animated"):this.el.removeClass("animated"),this._animations=t},get animations(){return this._animations},set width(t){this.el.width(t)},get width(){return parseInt(this.el.width(),10)},set height(t){this.el.height(t)},get height(){return parseInt(this.el.height(),10)},set x(t){this.el.css("left",t)},set y(t){this.el.css("top",t)},get x(){return parseInt(this.el.css("left"),10)},get y(){return parseInt(this.el.css("top"),10)},set z(t){this.el.css("z-index",t)},get z(){return parseInt(this.el.css("z-index"),10)},open:function(){var t=new n;return this.signals.emit("open",this),this.el.show(),this.el.addClass("opening"),this.el.onAnimationEnd(function(){this.el.removeClass("opening"),t.done()},this),this._closed=!1,t},close:function(){var t=new n;return this.signals.emit("close",this),this.el.addClass("closing"),this.el.onAnimationEnd(function(){this.el.removeClass("closing"),this.el.addClass("closed"),this.el.hide(),this.signals.emit("closed",this),t.done()},this),this._closed=!0,t},destroy:function(){var t=function(){this.$content.html(""),this.signals.emit("destroyed",this),this._destroyed=!0}.bind(this);this.signals.emit("destroy",this),this.closed?t():this.close().getFuture().then(function(){t()})},resize:function(t,n){return this.width=t,this.height=n,this},move:function(t,n){return this.x=t,this.y=n,this},stamp:function(){return this.restore=function(){var t={width:this.width,height:this.height},n={x:this.x,y:this.y};return function(){return this.resize(t.width,t.height),this.move(n.x,n.y),this}}.apply(this),this.restore},restore:function(){},maximize:function(){this.el.addClass("maximazing");var t=function(){this.el.removeClass("maximazing")};return this.animations?this.el.onTransitionEnd(t,this):t.call(this),this.maximized=!this.maximized,this},minimize:function(){this.el.addClass("minimizing");var t=function(){this.el.removeClass("minimizing")};return this.animations?this.el.onTransitionEnd(t,this):t.call(this),this.minimized=!this.minimized,this},focus:function(){return this.active=!0,this},blur:function(){return this.active=!1,this},toLocal:function(t){return{x:t.x-this.x,y:t.y-this.y}},toGlobal:function(t){return{x:t.x+this.x,y:t.y+this.y}},append:function(t){t.appendTo(this.$content)}},o}),i("ventus/wm/modes/default",[],function(){"use strict";var t={register:function(){console.log("Default mode registered.")},plug:function(){},unplug:function(){},actions:{maximize:function(t){t.move(0,0),t.el.css("-webkit-transform","translate3d(0, 0, 0);"),t.resize(this.el.width(),this.el.height())},restore:function(t,n){n.call(t)},minimize:function(t){t.resize(0,0)}}};return t}),function(){var t=this,n=t._,e={},i=Array.prototype,r=Object.prototype,s=Function.prototype,o=i.push,a=i.slice,u=i.concat,c=r.toString,l=r.hasOwnProperty,h=i.forEach,f=i.map,p=i.reduce,d=i.reduceRight,m=i.filter,v=i.every,g=i.some,w=i.indexOf,y=i.lastIndexOf,b=Array.isArray,_=Object.keys,x=s.bind,j=function(t){return t instanceof j?t:this instanceof j?void(this._wrapped=t):new j(t)};"undefined"!=typeof exports?("undefined"!=typeof module&&module.exports&&(exports=module.exports=j),exports._=j):t._=j,j.VERSION="1.4.4";var z=j.each=j.forEach=function(t,n,i){if(null!=t)if(h&&t.forEach===h)t.forEach(n,i);else if(t.length===+t.length){for(var r=0,s=t.length;s>r;r++)if(n.call(i,t[r],r,t)===e)return}else for(var o in t)if(j.has(t,o)&&n.call(i,t[o],o,t)===e)return};j.map=j.collect=function(t,n,e){var i=[];return null==t?i:f&&t.map===f?t.map(n,e):(z(t,function(t,r,s){i[i.length]=n.call(e,t,r,s)}),i)};var E="Reduce of empty array with no initial value";j.reduce=j.foldl=j.inject=function(t,n,e,i){var r=arguments.length>2;if(null==t&&(t=[]),p&&t.reduce===p)return i&&(n=j.bind(n,i)),r?t.reduce(n,e):t.reduce(n);if(z(t,function(t,s,o){r?e=n.call(i,e,t,s,o):(e=t,r=!0)}),!r)throw new TypeError(E);return e},j.reduceRight=j.foldr=function(t,n,e,i){var r=arguments.length>2;if(null==t&&(t=[]),d&&t.reduceRight===d)return i&&(n=j.bind(n,i)),r?t.reduceRight(n,e):t.reduceRight(n);var s=t.length;if(s!==+s){var o=j.keys(t);s=o.length}if(z(t,function(a,u,c){u=o?o[--s]:--s,r?e=n.call(i,e,t[u],u,c):(e=t[u],r=!0)}),!r)throw new TypeError(E);return e},j.find=j.detect=function(t,n,e){var i;return O(t,function(t,r,s){return n.call(e,t,r,s)?(i=t,!0):void 0}),i},j.filter=j.select=function(t,n,e){var i=[];return null==t?i:m&&t.filter===m?t.filter(n,e):(z(t,function(t,r,s){n.call(e,t,r,s)&&(i[i.length]=t)}),i)},j.reject=function(t,n,e){return j.filter(t,function(t,i,r){return!n.call(e,t,i,r)},e)},j.every=j.all=function(t,n,i){n||(n=j.identity);var r=!0;return null==t?r:v&&t.every===v?t.every(n,i):(z(t,function(t,s,o){return(r=r&&n.call(i,t,s,o))?void 0:e}),!!r)};var O=j.some=j.any=function(t,n,i){n||(n=j.identity);var r=!1;return null==t?r:g&&t.some===g?t.some(n,i):(z(t,function(t,s,o){return r||(r=n.call(i,t,s,o))?e:void 0}),!!r)};j.contains=j.include=function(t,n){return null==t?!1:w&&t.indexOf===w?-1!=t.indexOf(n):O(t,function(t){return t===n})},j.invoke=function(t,n){var e=a.call(arguments,2),i=j.isFunction(n);return j.map(t,function(t){return(i?n:t[n]).apply(t,e)})},j.pluck=function(t,n){return j.map(t,function(t){return t[n]})},j.where=function(t,n,e){return j.isEmpty(n)?e?null:[]:j[e?"find":"filter"](t,function(t){for(var e in n)if(n[e]!==t[e])return!1;return!0})},j.findWhere=function(t,n){return j.where(t,n,!0)},j.max=function(t,n,e){if(!n&&j.isArray(t)&&t[0]===+t[0]&&65535>t.length)return Math.max.apply(Math,t);if(!n&&j.isEmpty(t))return-1/0;var i={computed:-1/0,value:-1/0};return z(t,function(t,r,s){var o=n?n.call(e,t,r,s):t;o>=i.computed&&(i={value:t,computed:o})}),i.value},j.min=function(t,n,e){if(!n&&j.isArray(t)&&t[0]===+t[0]&&65535>t.length)return Math.min.apply(Math,t);if(!n&&j.isEmpty(t))return 1/0;var i={computed:1/0,value:1/0};return z(t,function(t,r,s){var o=n?n.call(e,t,r,s):t;i.computed>o&&(i={value:t,computed:o})}),i.value},j.shuffle=function(t){var n,e=0,i=[];return z(t,function(t){n=j.random(e++),i[e-1]=i[n],i[n]=t}),i};var C=function(t){return j.isFunction(t)?t:function(n){return n[t]}};j.sortBy=function(t,n,e){var i=C(n);return j.pluck(j.map(t,function(t,n,r){return{value:t,index:n,criteria:i.call(e,t,n,r)}}).sort(function(t,n){var e=t.criteria,i=n.criteria;if(e!==i){if(e>i||void 0===e)return 1;if(i>e||void 0===i)return-1}return t.index<n.index?-1:1}),"value")};var k=function(t,n,e,i){var r={},s=C(n||j.identity);return z(t,function(n,o){var a=s.call(e,n,o,t);i(r,a,n)}),r};j.groupBy=function(t,n,e){return k(t,n,e,function(t,n,e){(j.has(t,n)?t[n]:t[n]=[]).push(e)})},j.countBy=function(t,n,e){return k(t,n,e,function(t,n){j.has(t,n)||(t[n]=0),t[n]++})},j.sortedIndex=function(t,n,e,i){e=null==e?j.identity:C(e);for(var r=e.call(i,n),s=0,o=t.length;o>s;){var a=s+o>>>1;r>e.call(i,t[a])?s=a+1:o=a}return s},j.toArray=function(t){return t?j.isArray(t)?a.call(t):t.length===+t.length?j.map(t,j.identity):j.values(t):[]},j.size=function(t){return null==t?0:t.length===+t.length?t.length:j.keys(t).length},j.first=j.head=j.take=function(t,n,e){return null==t?void 0:null==n||e?t[0]:a.call(t,0,n)},j.initial=function(t,n,e){return a.call(t,0,t.length-(null==n||e?1:n))},j.last=function(t,n,e){return null==t?void 0:null==n||e?t[t.length-1]:a.call(t,Math.max(t.length-n,0))},j.rest=j.tail=j.drop=function(t,n,e){return a.call(t,null==n||e?1:n)},j.compact=function(t){return j.filter(t,j.identity)};var M=function(t,n,e){return z(t,function(t){j.isArray(t)?n?o.apply(e,t):M(t,n,e):e.push(t)}),e};j.flatten=function(t,n){return M(t,n,[])},j.without=function(t){return j.difference(t,a.call(arguments,1))},j.uniq=j.unique=function(t,n,e,i){j.isFunction(n)&&(i=e,e=n,n=!1);var r=e?j.map(t,e,i):t,s=[],o=[];return z(r,function(e,i){(n?i&&o[o.length-1]===e:j.contains(o,e))||(o.push(e),s.push(t[i]))}),s},j.union=function(){return j.uniq(u.apply(i,arguments))},j.intersection=function(t){var n=a.call(arguments,1);return j.filter(j.uniq(t),function(t){return j.every(n,function(n){return j.indexOf(n,t)>=0})})},j.difference=function(t){var n=u.apply(i,a.call(arguments,1));return j.filter(t,function(t){return!j.contains(n,t)})},j.zip=function(){for(var t=a.call(arguments),n=j.max(j.pluck(t,"length")),e=Array(n),i=0;n>i;i++)e[i]=j.pluck(t,""+i);return e},j.object=function(t,n){if(null==t)return{};for(var e={},i=0,r=t.length;r>i;i++)n?e[t[i]]=n[i]:e[t[i][0]]=t[i][1];return e},j.indexOf=function(t,n,e){if(null==t)return-1;var i=0,r=t.length;if(e){if("number"!=typeof e)return i=j.sortedIndex(t,n),t[i]===n?i:-1;i=0>e?Math.max(0,r+e):e}if(w&&t.indexOf===w)return t.indexOf(n,e);for(;r>i;i++)if(t[i]===n)return i;return-1},j.lastIndexOf=function(t,n,e){if(null==t)return-1;var i=null!=e;if(y&&t.lastIndexOf===y)return i?t.lastIndexOf(n,e):t.lastIndexOf(n);for(var r=i?e:t.length;r--;)if(t[r]===n)return r;return-1},j.range=function(t,n,e){1>=arguments.length&&(n=t||0,t=0),e=arguments[2]||1;for(var i=Math.max(Math.ceil((n-t)/e),0),r=0,s=Array(i);i>r;)s[r++]=t,t+=e;return s},j.bind=function(t,n){if(t.bind===x&&x)return x.apply(t,a.call(arguments,1));var e=a.call(arguments,2);return function(){return t.apply(n,e.concat(a.call(arguments)))}},j.partial=function(t){var n=a.call(arguments,1);return function(){return t.apply(this,n.concat(a.call(arguments)))}},j.bindAll=function(t){var n=a.call(arguments,1);return 0===n.length&&(n=j.functions(t)),z(n,function(n){t[n]=j.bind(t[n],t)}),t},j.memoize=function(t,n){var e={};return n||(n=j.identity),function(){var i=n.apply(this,arguments);return j.has(e,i)?e[i]:e[i]=t.apply(this,arguments)}},j.delay=function(t,n){var e=a.call(arguments,2);return setTimeout(function(){return t.apply(null,e)},n)},j.defer=function(t){return j.delay.apply(j,[t,1].concat(a.call(arguments,1)))},j.throttle=function(t,n){var e,i,r,s,o=0,a=function(){o=new Date,r=null,s=t.apply(e,i)};return function(){var u=new Date,c=n-(u-o);return e=this,i=arguments,0>=c?(clearTimeout(r),r=null,o=u,s=t.apply(e,i)):r||(r=setTimeout(a,c)),s}},j.debounce=function(t,n,e){var i,r;return function(){var s=this,o=arguments,a=function(){i=null,e||(r=t.apply(s,o))},u=e&&!i;return clearTimeout(i),i=setTimeout(a,n),u&&(r=t.apply(s,o)),r}},j.once=function(t){var n,e=!1;return function(){return e?n:(e=!0,n=t.apply(this,arguments),t=null,n)}},j.wrap=function(t,n){return function(){var e=[t];return o.apply(e,arguments),n.apply(this,e)}},j.compose=function(){var t=arguments;return function(){for(var n=arguments,e=t.length-1;e>=0;e--)n=[t[e].apply(this,n)];return n[0]}},j.after=function(t,n){return 0>=t?n():function(){return 1>--t?n.apply(this,arguments):void 0}},j.keys=_||function(t){if(t!==Object(t))throw new TypeError("Invalid object");var n=[];for(var e in t)j.has(t,e)&&(n[n.length]=e);return n},j.values=function(t){var n=[];for(var e in t)j.has(t,e)&&n.push(t[e]);return n},j.pairs=function(t){var n=[];for(var e in t)j.has(t,e)&&n.push([e,t[e]]);return n},j.invert=function(t){var n={};for(var e in t)j.has(t,e)&&(n[t[e]]=e);return n},j.functions=j.methods=function(t){var n=[];for(var e in t)j.isFunction(t[e])&&n.push(e);return n.sort()},j.extend=function(t){return z(a.call(arguments,1),function(n){if(n)for(var e in n)t[e]=n[e]}),t},j.pick=function(t){var n={},e=u.apply(i,a.call(arguments,1));
return z(e,function(e){e in t&&(n[e]=t[e])}),n},j.omit=function(t){var n={},e=u.apply(i,a.call(arguments,1));for(var r in t)j.contains(e,r)||(n[r]=t[r]);return n},j.defaults=function(t){return z(a.call(arguments,1),function(n){if(n)for(var e in n)null==t[e]&&(t[e]=n[e])}),t},j.clone=function(t){return j.isObject(t)?j.isArray(t)?t.slice():j.extend({},t):t},j.tap=function(t,n){return n(t),t};var A=function(t,n,e,i){if(t===n)return 0!==t||1/t==1/n;if(null==t||null==n)return t===n;t instanceof j&&(t=t._wrapped),n instanceof j&&(n=n._wrapped);var r=c.call(t);if(r!=c.call(n))return!1;switch(r){case"[object String]":return t==n+"";case"[object Number]":return t!=+t?n!=+n:0==t?1/t==1/n:t==+n;case"[object Date]":case"[object Boolean]":return+t==+n;case"[object RegExp]":return t.source==n.source&&t.global==n.global&&t.multiline==n.multiline&&t.ignoreCase==n.ignoreCase}if("object"!=typeof t||"object"!=typeof n)return!1;for(var s=e.length;s--;)if(e[s]==t)return i[s]==n;e.push(t),i.push(n);var o=0,a=!0;if("[object Array]"==r){if(o=t.length,a=o==n.length)for(;o--&&(a=A(t[o],n[o],e,i)););}else{var u=t.constructor,l=n.constructor;if(u!==l&&!(j.isFunction(u)&&u instanceof u&&j.isFunction(l)&&l instanceof l))return!1;for(var h in t)if(j.has(t,h)&&(o++,!(a=j.has(n,h)&&A(t[h],n[h],e,i))))break;if(a){for(h in n)if(j.has(n,h)&&!o--)break;a=!o}}return e.pop(),i.pop(),a};j.isEqual=function(t,n){return A(t,n,[],[])},j.isEmpty=function(t){if(null==t)return!0;if(j.isArray(t)||j.isString(t))return 0===t.length;for(var n in t)if(j.has(t,n))return!1;return!0},j.isElement=function(t){return!(!t||1!==t.nodeType)},j.isArray=b||function(t){return"[object Array]"==c.call(t)},j.isObject=function(t){return t===Object(t)},z(["Arguments","Function","String","Number","Date","RegExp"],function(t){j["is"+t]=function(n){return c.call(n)=="[object "+t+"]"}}),j.isArguments(arguments)||(j.isArguments=function(t){return!(!t||!j.has(t,"callee"))}),"function"!=typeof/./&&(j.isFunction=function(t){return"function"==typeof t}),j.isFinite=function(t){return isFinite(t)&&!isNaN(parseFloat(t))},j.isNaN=function(t){return j.isNumber(t)&&t!=+t},j.isBoolean=function(t){return t===!0||t===!1||"[object Boolean]"==c.call(t)},j.isNull=function(t){return null===t},j.isUndefined=function(t){return void 0===t},j.has=function(t,n){return l.call(t,n)},j.noConflict=function(){return t._=n,this},j.identity=function(t){return t},j.times=function(t,n,e){for(var i=Array(t),r=0;t>r;r++)i[r]=n.call(e,r);return i},j.random=function(t,n){return null==n&&(n=t,t=0),t+Math.floor(Math.random()*(n-t+1))};var F={escape:{"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","/":"&#x2F;"}};F.unescape=j.invert(F.escape);var P={escape:RegExp("["+j.keys(F.escape).join("")+"]","g"),unescape:RegExp("("+j.keys(F.unescape).join("|")+")","g")};j.each(["escape","unescape"],function(t){j[t]=function(n){return null==n?"":(""+n).replace(P[t],function(n){return F[t][n]})}}),j.result=function(t,n){if(null==t)return null;var e=t[n];return j.isFunction(e)?e.call(t):e},j.mixin=function(t){z(j.functions(t),function(n){var e=j[n]=t[n];j.prototype[n]=function(){var t=[this._wrapped];return o.apply(t,arguments),S.call(this,e.apply(j,t))}})};var T=0;j.uniqueId=function(t){var n=++T+"";return t?t+n:n},j.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var H=/(.)^/,I={"'":"'","\\":"\\","\r":"r","\n":"n","	":"t","\u2028":"u2028","\u2029":"u2029"},R=/\\|'|\r|\n|\t|\u2028|\u2029/g;j.template=function(t,n,e){var i;e=j.defaults({},e,j.templateSettings);var r=RegExp([(e.escape||H).source,(e.interpolate||H).source,(e.evaluate||H).source].join("|")+"|$","g"),s=0,o="__p+='";t.replace(r,function(n,e,i,r,a){return o+=t.slice(s,a).replace(R,function(t){return"\\"+I[t]}),e&&(o+="'+\n((__t=("+e+"))==null?'':_.escape(__t))+\n'"),i&&(o+="'+\n((__t=("+i+"))==null?'':__t)+\n'"),r&&(o+="';\n"+r+"\n__p+='"),s=a+n.length,n}),o+="';\n",e.variable||(o="with(obj||{}){\n"+o+"}\n"),o="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+o+"return __p;\n";try{i=Function(e.variable||"obj","_",o)}catch(a){throw a.source=o,a}if(n)return i(n,j);var u=function(t){return i.call(this,t,j)};return u.source="function("+(e.variable||"obj")+"){\n"+o+"}",u},j.chain=function(t){return j(t).chain()};var S=function(t){return this._chain?j(t).chain():t};j.mixin(j),z(["pop","push","reverse","shift","sort","splice","unshift"],function(t){var n=i[t];j.prototype[t]=function(){var e=this._wrapped;return n.apply(e,arguments),"shift"!=t&&"splice"!=t||0!==e.length||delete e[0],S.call(this,e)}}),z(["concat","join","slice"],function(t){var n=i[t];j.prototype[t]=function(){return S.call(this,n.apply(this._wrapped,arguments))}}),j.extend(j.prototype,{chain:function(){return this._chain=!0,this},value:function(){return this._wrapped}})}.call(this),i("underscore",[],function(){}),i("ventus/wm/modes/expose",["underscore","ventus/core/promise"],function(t,n){"use strict";var e={register:function(){var n=this;console.log("Expose mode registered."),this.el.on("contextmenu",t.throttle(function(){return"expose"!==n.mode?n.windows.length>0&&(n.mode="expose"):"expose"===n.mode&&(n.mode="default"),!1},1e3))},plug:function(){var t,n,e,i,r=Math.floor,s=Math.ceil,o=this,a=s(this.windows.length/2),u=r(this.el.width()/a),c=r(this.el.height()/2);this.el.addClass("expose");for(var l,h=0,f=this.windows.length;f>h;h++){l=this.windows[h],l.stamp(),t=l.height>l.width?l.height>c?c/l.height:1:l.width>u?u/l.width:1,t-=.15,i={x:h%a*u,y:(a>h?0:1)*c},n=i.x+r((u-t*l.width)/2),e=i.y+r((c-t*l.height)/2),l.enabled=!1,l.movable=!1,l.el.addClass("exposing"),l.el.css("transform-origin","0 0"),l.el.css("transform","scale("+t+")"),l.el.css("top",e),l.el.css("left",n);var p=function(){l.el.removeClass("exposing")};l.animations?l.el.onTransitionEnd(p,this):p.call(this)}this.overlay=!0,this.el.one("click",function(){o.mode="default"})},unplug:function(){var t=new n;t.getFuture().then(function(){this.el.removeClass("expose")}.bind(this)),0===this.windows.length&&t.done();for(var e,i=this.windows.length;i--;){e=this.windows[i],e.restore(),e.el.css("transform","scale(1)"),e.el.css("transform-origin","50% 50%");var r=function(n,e){return function(){0===e&&t.done(),n.el.css("transform","")}}(e,i);e.animations?this.el.onTransitionEnd(r,this):r.call(this),e.movable=!0,e.enabled=!0}this.overlay=!1},actions:{focus:function(){},close:function(){this.mode="expose"},select:function(t){this.mode="default",t.focus()}}};return e}),i("ventus/wm/modes/fullscreen",[],function(){"use strict";var t={register:function(){console.log("Fullscreen mode registered.")},plug:function(){this.el.addClass("fullscreen");for(var t,n=0,e=this.windows.length;e>n;n++)t=this.windows[n],t.move(0,0),t.el.css("-webkit-transform","translate3d(0, 0, 0);"),t.resize(this.el.width(),this.el.height())},unplug:function(){for(var t,n=this.windows.length;n--;){t=this.windows[n],t.restore(),t.el.css("transform","scale(1)"),t.el.css("transform-origin","50% 50%");var e=function(t){return function(){this.el.removeClass("fullscreen"),t.el.css("transform","")}}(t);this.el.onTransitionEnd(e,this),t.movable=!0,t.resizable=!0,t.enabled=!0}this.overlay=!1},actions:{focus:function(){},close:function(){this.mode="expose"},select:function(t){this.mode="default",t.focus()}}};return t}),i("ventus/wm/windowmanager",["$","ventus/wm/window","ventus/core/view","ventus/wm/modes/default","ventus/wm/modes/expose","ventus/wm/modes/fullscreen"],function(t,n,e,i,r,s){"use strict";var o=function(){var n;this.el=e('<div class="wm-space"><div class="wm-overlay" /></div>'),t(document.body).prepend(this.el),this.$overlay=this.el.find(".wm-overlay"),this.$overlay.css("z-index",this._baseZ-1),this.actions.forEach(function(t){this[t]=function(t){return function(){this.currentMode.actions[t]&&this.currentMode.actions[t].apply(this,arguments)}}.call(this,t)},this);for(var i in this.modes)this.modes.hasOwnProperty(i)&&this.modes[i].register&&this.modes[i].register.apply(this);this.windows=[],this.active=null,this.mode="default",n=this.createWindow,this.createWindow=n.bind(this),this.createWindow.fromQuery=n.fromQuery.bind(this),this.createWindow.fromElement=n.fromElement.bind(this)};return o.prototype={actions:["focus","blur","close","maximize","minimize","restore","select"],modes:{"default":i,expose:r,fullscreen:s},set mode(t){var n=this.modes[t];n&&this._mode!==t&&(this._mode&&this.currentMode.unplug&&this.currentMode.unplug.apply(this),n.plug&&n.plug.apply(this),this._mode=t)},get mode(){return this._mode},get currentMode(){return this.modes[this._mode]},set overlay(t){this.$overlay.css("opacity",t?.8:0),this._overlay=t},get overlay(){return this._overlay},createWindow:function(t){var e=new n(t);return this.mode="default",e.signals.on("focus",this._focus,this),e.signals.on("blur",this._blur,this),e.signals.on("close",this._close,this),this.actions.forEach(function(t){e.signals.on(t,this[t],this)},this),this.windows.push(e),e.space=this.el,e.focus(),e},_focus:function(t){var n,e,i=1e4,r=i+1e4;if(!this.active||this.active!==t){if(this.active?(n=this.active.z,this.active.blur()):n=i,e=this.windows.indexOf(t),this.windows.splice(e,1),this.windows.push(t),t.z=n+1,n>r+this.windows.length)for(var s,o=this.windows.length;o--;)s=this.windows[o].z,this.windows[o].z=i+(s-r);this.active=t}},_blur:function(t){this.active===t&&(this.active=null)},_close:function(t){var n,e=this.windows.indexOf(t);return-1===e?void console.log("Trying to close a window that doesn't exist in this window manager"):(this.windows.splice(e,1),n=this.windows.length,void(this.active&&this.active===t&&(this.active=0!==n?this.windows[n-1]:null,this.active&&this.active.focus())))}},o.prototype.createWindow.fromQuery=function(t,n){return n.content=e(t),this.createWindow(n)},o.prototype.createWindow.fromElement=function(t,n){return n.content=e(t),this.createWindow(n)},o}),i("ventus",["require","exports","module","ventus/wm/windowmanager","ventus/wm/window"],function(t){"use strict";return{version:"0.2",browser:{animationEventName:function(){var t=document.body.style,n=null;return""===t.animation?n="animationend":""===t.MozAnimation?n="mozAnimationEnd":""===t.webkitAnimation&&(n="webkitAnimationEnd"),n}},WindowManager:t("ventus/wm/windowmanager"),Window:t("ventus/wm/window")}}),i("src/main",["almond","handlebars","ventus"],function(){}),i("$",function(){return t}),i("underscore",function(){return _}),e("ventus")});